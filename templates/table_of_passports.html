<!DOCTYPE html>
<html lang="en">
    <head>
        <link href="/static/style.css" rel="stylesheet">
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Таблица всех паспортов</title>
    </head>
    <main>
    <form action="/" method="get" target=_self>
        <input type="submit" class="input_button" value="Вернуться на главную страницу">     
    </form>
    <p></p>
    <table  table class="table_sort">
        <caption>Таблица всех паспортов(сортируется при нажатии на название столбца)</caption>
        <thead>
                <tr>
                <th>Айди платы в базе</th>
                <th>Название</th>
                <th>Серийный номер </th>
                <th>Мак-адрес</th>
                <th>Статус печати(0-не присвоен,1-напечатан)</th>
                </tr>
        </thead>
        <tbody>
            <div class="scroll-table-body">
            {% for passport in passports %}
            <tr>
                <th>{{passport[0]}}</th>
                <th>{{passport[1]}}</th>
                <th>{{passport[2]}}</th>
                <th>{{passport[3]}}</th>
                <th>{{passport[4]}}</th>
            </tr>
            {% endfor %}
            </div>
        </tbody>
            </div>
        </table> 
    <p></p>
    </main>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
        const getSort = ({ target }) => {
            const order = (target.dataset.order = -(target.dataset.order || -1));
            const index = [...target.parentNode.cells].indexOf(target);
            const collator = new Intl.Collator(['en', 'ru'], { numeric: true });
            const comparator = (index, order) => (a, b) => order * collator.compare(
                a.children[index].innerHTML,
                b.children[index].innerHTML
            );
            for(const tBody of target.closest('table').tBodies)
                tBody.append(...[...tBody.rows].sort(comparator(index, order)));
            for(const cell of target.parentNode.cells)
                cell.classList.toggle('sorted', cell === target);
        };
        document.querySelectorAll('.table_sort thead').forEach(tableTH => tableTH.addEventListener('click', () => getSort(event)));
        });
    </script>
</body>
</html>